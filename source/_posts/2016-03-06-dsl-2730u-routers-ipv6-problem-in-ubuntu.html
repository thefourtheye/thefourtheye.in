---
layout: post
title: "DSL-2730U router's ipv6 problem in Ubuntu"
date: 2016-03-06T20:32:00+05:30
categories:
 - Ubuntu
---

<div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">Today I faced a very strange problem. I got a new Tata DOCOMO connection and I wanted to fetch upstream changes from a GitHub repository, with <code>git fetch --all</code>. But all I got was<pre>fatal: unable to access 'https://github.com/&lt;repo&gt;': Failed to connect to github.com port 443: Network is unreachable<br /></pre>I thought that the internet connection has a problem. But then I was able to <code>ping github.com</code> and access that site in my browser, although curl still failed.<br /><pre>➜  io.js git:(master) ✗ curl https://github.com<br />curl: (7) Failed to connect to github.com port 443: Network is unreachable</pre>At this point I became curious and tried out the verbose curl,<br /><pre>➜  io.js git:(master) ✗ curl -v https://github.com<br />* Rebuilt URL to: https://github.com/<br />* Hostname was NOT found in DNS cache<br />*   Trying 192.30.252.128...<br />*   Trying 64:ff9b::c01e:fc81...<br />* connect to 64:ff9b::c01e:fc81 port 443 failed: Network is unreachable<br />* Failed to connect to github.com port 443: Network is unreachable<br />* Closing connection 0<br />curl: (7) Failed to connect to github.com port 443: Network is unreachable</pre>Now, it figures out both the IPv4 address and the IPv6 address but favors IPv6 over IPv4. And it looks like, either the modem or the ISP don't support IPv6 based communication. I don't know how to confirm what the actual problem is. I tried to upgrade the firmware of my DSL-2730U router, by logging into 192.168.1.1. But it kept failing, saying the the firmware image file is too big.<br /><br />So, I decided to disable IPv6 in my Ubuntu machine and I followed the instructions given <a href="http://askubuntu.com/a/484487/147253">here</a> and it worked perfectly. Basically, I edited <code>/etc/sysctl.conf</code> file to include the following lines<pre># disable IPv6 on this machine<br />net.ipv6.conf.all.disable_ipv6 = 1<br />net.ipv6.conf.default.disable_ipv6 = 1<br />net.ipv6.conf.lo.disable_ipv6 = 1</pre>and then executed <code>sudo sysctl --system</code> and <code>sudo sysctl -p</code>.<br /></div></div>
