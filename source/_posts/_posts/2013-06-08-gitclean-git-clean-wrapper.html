---
layout: post
title: "gitclean - a git clean wrapper"
date: 2013-06-08T18:40:00+05:30
---

<div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">Last week, I had to make some changes to the code. I was keep on making changes but forgot to add them to git and to take backup. When I am almost done I wanted to commit and before committing I checked the changed files with this.<br /><br /><code>git status</code><br /><br />it listed all the files which have got changed and few other temporary files and compiled binaries, which I don't want to keep in the repository. So I did<br /><br /><code>git clean -qfxd</code><br /><br />That's it. This cleared everything, including my newly added untracked files and all my hardwork went in vain. Then I read about <code>git clean</code> <a href="https://www.kernel.org/pub/software/scm/git/docs/git-clean.html">here</a> and got to know what I could have done to avoid this problem. And then I was thinking, if there is a script which would remind me that, the following files will also be removed and only when I say `yes` it would go ahead and clean the repository. So I made this <a href="https://github.com/thefourtheye/gitclean">gitclean</a> script. This would collect the status of the files with <code>git status --porcelain</code> and then compare it with the list of extensions specified in the config file. If they match, it would report to the user and ask his consent before beginning to clean.<br /><br /><h2>Github</h2><br />Github Repository : <a href="https://github.com/thefourtheye/gitclean">https://github.com/thefourtheye/gitclean</a>.<br /><br /><h2>Installation</h2><br />To install this script, please follow these steps<br /><br /><pre class="prettyprint">wget https://raw.github.com/thefourtheye/gitclean/master/gitclean<br />chmod 544 gitclean<br />./gitclean install<br /></pre><br /><ol><li>The first step will download the script from github</li><li>The second step changes the permissions of the file to 544</li><li>The third step installs the script. Basically, it copies itself to the user's home directory and creates the gitclean alias in the <code>$HOME/.bashrc</code> file<br /></ol><h2>Configuration</h2>Users can specify the extensions, gitclean has to report in the <code>$HOME/.gitclean_extenstions</code> file. By default, gitclean will report the extension-less files and directories as well. But, it does not report the empty directory. My <code>.gitclean_extenstions</code> file has the following items.  <pre class="prettyprint">cpp<br />js<br /></pre><h2>Sample Runs</h2>1. With no files changed  <pre class="prettyprint">~/gitclean$ gitclean<br /><br />Interesting Extensions found in [/home/thefourtheye/.gitclean_extensions] are as follows<br />[cpp]<br />[js]<br /><br />0 interesting files found, in total 0 files. Cleaning was not done. Exiting...<br />~/gitclean$ <br /></pre>2. With one interesting file [Test.js]  <pre class="prettyprint">~/gitclean$ gitclean<br /><br />Interesting Extensions found in [/home/thefourtheye/.gitclean_extensions] are as follows<br />[cpp]<br />[js]<br /><br />Test.js<br /><br />1 interesting files found, in total 1 files. Are you sure want to clean? [y/Y - Yes, Any other Key - No] : n<br />Cleaning was not done. Exiting...<br />~/gitclean$ <br /></pre>3. With one interesting file [Test.js] and a non-empty directory  <pre class="prettyprint">~/gitclean$ gitclean<br /><br />Interesting Extensions found in [/home/thefourtheye/.gitclean_extensions] are as follows<br />[cpp]<br />[js]<br /><br />Test.js<br />Test/<br /><br />2 interesting files found, in total 2 files. Are you sure want to clean? [y/Y - Yes, Any other Key - No] : y<br />Cleaning...<br /><br />~/gitclean$ <br /></pre>4. With one interesting file [Test.js] and a non-empty directory and a non-interesting file [Test.txt]  <pre class="prettyprint">~/gitclean$ gitclean<br /><br />Interesting Extensions found in [/home/thefourtheye/.gitclean_extensions] are as follows<br />[cpp]<br />[js]<br /><br />Test.js<br />Test/<br /><br />2 interesting files found, in total 3 files. Are you sure want to clean? [y/Y - Yes, Any other Key - No] : y<br />Cleaning...<br /><br />~/gitclean$ <br /></pre></div></div>
