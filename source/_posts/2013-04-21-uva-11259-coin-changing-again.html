---
layout: post
title: "UVa 11259 - Coin Changing Again"
date: 2013-04-21T10:58:00+05:30
---

<div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">This took lot of my time and I managed to come up with this Top-down Dynamic Programming solution. This approach times out. Any suggestions?  Problem Statement : <a href="http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=2226">http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=2226</a> <br /></div><pre class="prettyprint"># include &lt;cstdio&gt;<br /># include &lt;map&gt;<br /># include &lt;set&gt;<br />using namespace std;<br />struct State<br />{<br /> State (int v1, int v2, int v3, int v4)<br /> {<br />  V1 = v1; V2 = v2; V3 = v3; V4 = v4;<br /> }<br /> int getPart2(int Value = 0)<br /> {<br />  int Part2 = 0;<br />  Part2 = (V4 &gt;&gt; 13);<br />  Part2 |= (Value &lt;&lt; 4);<br />  return Part2;<br /> }<br /> unsigned long long getPart1()<br /> {<br />  unsigned long long Part1 = 0;<br />  Part1 = V1;<br />  Part1 |= (V2 &lt;&lt; 17);<br />  Part1 |= ((unsigned long long)V3 &lt;&lt; 34);<br />  Part1 |= ((unsigned long long)V4 &lt;&lt; 51);<br />  return Part1;<br /> }<br /> int V1, V2, V3, V4;<br />};<br />map &lt;int, set&lt;unsigned long long&gt; &gt; States;<br />map &lt;int, set&lt;unsigned long long&gt; &gt; Solutions;<br />int c1, c2, c3, c4, q, d1, d2, d3, d4, v;<br />unsigned long long Result ;<br />bool CheckVisited (unsigned long long Part1, int Part2)<br />{<br /> if (States[Part2].count (Part1)) return true;<br /> States[Part2].insert (Part1);<br /> return false;<br />}<br />void Solution (State & s, int Value)<br />{<br /> unsigned long long Part1 = s.getPart1();<br /> int Part2 = s.getPart2(Value);<br /> if (!Value)<br /> {<br />  Solutions[Part2].insert (Part1);<br />  return;<br /> }<br /> if (CheckVisited(Part1, Part2)) return;<br /> if (s.V1 - 1 &gt;= 0 && Value - c1 &gt;= 0)<br /> {<br />  s.V1--;<br />  Solution (s, Value - c1);<br />  s.V1++;<br /> }<br /> if (s.V2 - 1 &gt;= 0 && Value - c2 &gt;= 0)<br /> {<br />  s.V2--;<br />  Solution (s, Value - c2);<br />  s.V2++;<br /> }<br /> if (s.V3 - 1 &gt;= 0 && Value - c3 &gt;= 0)<br /> {<br />  s.V3--;<br />  Solution (s, Value - c3);<br />  s.V3++;<br /> }<br /> if (s.V4 - 1 &gt;= 0 && Value - c4 &gt;= 0)<br /> {<br />  s.V4--;<br />  Solution (s, Value - c4);<br />  s.V4++;<br /> }<br />}<br />int main()<br />{<br /> freopen ("Input.txt", "r", stdin);<br /> freopen ("Scratch.txt", "w", stdout);<br /> int N;<br /> scanf ("%d", &N);<br /> State s (0, 0, 0, 0);<br /> while (N--)<br /> {<br />  scanf ("%d%d%d%d%d", &c1, &c2, &c3, &c4, &q);<br />  while (q--)<br />  {<br />   scanf ("%d%d%d%d%d", &s.V1, &s.V2, &s.V3, &s.V4, &v);<br />   Result = 0;<br />   States.clear();<br />   Solutions.clear();<br />   Solution (s, v);<br />   for (map&lt;int, set&lt;unsigned long long&gt; &gt;::iterator it = Solutions.begin(); it != Solutions.end(); it++)<br />    Result += it-&gt;second.size();<br />   printf ("%lld\n", Result);<br />  }<br /> }<br />}<br /></pre></div>
