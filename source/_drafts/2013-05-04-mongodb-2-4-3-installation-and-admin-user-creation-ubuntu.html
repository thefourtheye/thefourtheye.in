---
layout: post
title: "MongoDB 2.4.3 installation and admin user creation - Ubuntu"
date: 2013-05-04T13:40:00+05:30
categories:
 - MongoDB
 - Ubuntu
---

<div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">This post will explain how to install and configure <b>MongoDB version 2.4.3</b> in Ubuntu. <br /><br /><h1>Installation</h1><br />First, as mentioned <a href="http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/">here</a>,<br /><br />Add the MongoDB distributor's GPG key<br /><br /><pre class="prettyprint">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10<br /></pre><br />Insert the repo information in 10gen.list file<br /><br /><pre class="prettyprint">echo 'deb http://downloads-distro.mongodb.org/repo/ubuntu-upstart dist 10gen' | sudo tee /etc/apt/sources.list.d/10gen.list<br /></pre><br />Now install MongoDB's latest stable release with<br /><br /><pre class="prettyprint">sudo apt-get update<br />sudo apt-get install mongodb-10gen<br /></pre><br />The above seen commands will install <b>MongoDB v 2.4.3</b> successfully.<br /><br />You can start, stop and restart the MongoDB like this<br /><br /><pre class="prettyprint">sudo service mongodb start<br />sudo service mongodb stop<br />sudo service mongodb restart<br /></pre><br />If you want to start the MongoDB manually, you can do it this way<br /><pre class="prettyprint">sudo mongod --config /etc/mongodb.conf &<br /></pre><br /><h1>Admin user creation</h1><br /><ul><li><b>/etc/mongodb.conf</b> file has all the configurations of MongoDB.<br /><li><b>/var/log/mongodb/mongodb.log</b> is where the logging will be done, by default.<br />This can be changed by modifying the <b>logpath</b> value in <b>/etc/mongodb.conf</b><br /><li><b>/var/lib/mongodb</b> is where the MongoDB data will be stored, by default.<br />This can be changed by modifying the <b>dbpath</b> value in <b>/etc/mongodb.conf</b><br /></ul>First, start mongodb with <a href="http://docs.mongodb.org/manual/tutorial/add-user-administrator/#localhost-exception">localhost exception</a> like this  <pre class="prettyprint">sudo mongod --setParameter enableLocalhostAuthBypass=1 --config /etc/mongodb.conf<br /></pre>The terminal would go irresponsive here. If it is a fresh install, you will have to create a new database and add the User into it. You will be referring to this db for authentication.  <pre class="prettyprint">db = db.getSiblingDB('admin')<br />db.addUser( { user: "thefourtheye", pwd: "<admin password>", roles: [ "userAdminAnyDatabase" ] } )<br /></pre>We are adding the User document to admin database. You can read more about the roles <a href="http://docs.mongodb.org/manual/reference/user-privileges/">here</a>. I have used <b>userAdminAnyDatabase</b> role to make the user thefourtheye an admin.  Lets create normal users now. Press Ctrl + C in the terminal to kill the MongoDB instance which we started with localhost exception. Open the file /etc/mongodb.conf in an editor and remove the # symbol from the line which has auth = true. Now start MongoDB.  <pre class="prettyprint">sudo service mongodb start<br /></pre> </div></div>
